
<head>
<!doctype html><html lang="de"><meta http-equiv="content-language" content="de"> <meta charset="UTF-8"><html><head><title>Nachrichten Scraper</title> 
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0-beta.1/angular.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0-beta.1/angular-cookies.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0-beta.1/angular-sanitize.js"></script>
 <link rel="stylesheet" href="mystyle.css"> 
 <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/ >
</head>
<body ng-app="putter">
 <a id="topp"></a>
<div id=main ng-controller="ListNews" >
 <div style=float:right>{{emailer}} | <a href style=color:blue;cursor:hand; ng-click="loggout()">Logout</a></div>
<center><br><br><a href=index.html style=text-decoration:none;><img title="Seite neu anfordern" src=zeitung.PNG ng-click="refresher()"></a>
<br><form novalidate class="simple-form" >

<input ng-value="search1"  ng-model="searchz" ng-keyup="update()" ng-click="sucher=false;fweiter=false;wweiter=true">
<input ng-value="pager1" ng-model="pagerz" name='pager'  type=hidden>
<input type=button ng-click="update()" value="suchen" ng-disabled="sucher"><input type=button value="reset" ng-click="refresher()"
</form>
<a ng-click="mysaved()" style=color:darkblue;font-family:verdana;font-size:11px;cursor:pointer;>Favoriten abrufen.</a></center>
<div ></div>
<table><tr><td></td><td style=font-family:verdana;font-size:11px;text-align:right;width:25px;>Favorit</td></tr>
<tr ng-repeat="news in newslist">
<td style=font-family:verdana;font-size:11px>
<b><a title={{news.value.source}} href={{news.value.link}} target=_blank style=color:black;>{{news.value.title}}</a></b><br>
<span>{{news.value.pubDate}}</span><br>
{{news.value.description}}<br><hr></td>
 <td style=font-family:verdana;font-size:11px;text-align:right;width:25px;><div class=squaredFour><input id="squaredFour{{$index}}"  type=checkbox data='{{news.path.key}}#||#{{news.value.pubDate'  ng-click="checkers($event)" ng-checked="{{news.value.liker}}">
  <label for="squaredFour{{$index}}"></label></div></td>
</tr>
<tr><td></td><td style=text-align:right;><input ng-show="fweiter" ng-disabled="fmydisabled" ng-model="fnexter" type=button value='favoriten weiter' ng-click="mysavedpager()"><input ng-show="wweiter" ng-disabled="mydisabled" ng-model="nexter" type=button value='weiter' ng-click="pager()"></td></tr>
</table>
<hr>
</div>
<br>
<script>
var myApp=angular.module('putter', ['ngCookies']);
myApp.controller('ListNews', ['$scope', '$http', '$element','$location', '$anchorScroll', '$cookies',  function($scope,$http,$element,$location,$anchorScroll,$cookies) {
$scope.mydisabled=false;
var cooker=$cookies.get('email');
if (cooker == "" || cooker == undefined) {}
$scope.fweiter=false;
$scope.wweiter=true;
$scope.emailer=cooker;
$scope.searchz=" ";
$scope.pagerz=15;

$http({ url: window.location.hostname+'/app.js', method: "GET", params: {o: 'g', user: $cookies.get('email')}}).success(function(data) {$scope.newslist=[]; $scope.newslist=data.body.results; if (parseInt(data.body.total_count,10) < 15){$scope.mydisabled=true; };  }); 

$scope.refresher= function() { $scope.wweiter=true;$scope.fweiter=false;
 $http({ url: window.location.hostname+'/app.js', method: "GET", params: {o: 'g', user: $cookies.get('email')}}).success(function(data) {$scope.newslist=[]; $scope.newslist=data.body.results; if (parseInt(data.body.total_count,10) < 15){$scope.mydisabled=true; };  }); 

}

//$scope.listnewz = function(newser) {     $http({ url: 'http://front1.uswest.appfog.ctl.io/app.js', method: "GET", params: {o: 'g'}}).success(function(data) {$scope.newslist=[]; $scope.newslist=data.body.results;   }); $scope.newser.search="";$scope.newser.pager="15" ; };
$scope.update = function() { $scope.mydisabled=false; 
   $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 's',search: $scope.searchz}}).success(function(data, status, headers, config) 
 {$scope.newslist=[]; $scope.newslist=data.body.results;$scope.pagerz='15';if (parseInt(data.body.total_count,10) < 15){$scope.mydisabled=true; } 
  $location.hash('topp');  $anchorScroll(); }); };

$scope.pager = function() {
   $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 's',search: $scope.searchz, offs: $scope.pagerz}}).success(function(data, status, headers, config) 
 {$scope.newslist=[]; $scope.newslist=data.body.results;   
  $scope.pagerz=parseInt($scope.pagerz, 10)+15; if (parseInt($scope.pagerz, 10) >= parseInt(data.body.total_count,10)) {
  $scope.mydisabled=true;   };   $location.hash('topp');  $anchorScroll(); });
};

$scope.mysaved = function() { $scope.fmydisabled=false; $scope.sucher=true;$scope.searchz="";$scope.wweiter=false;$scope.fweiter=true;
   $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 'mySaved', offs: 0}}).success(function(data, status, headers, config) 
 { if (data != 'none'){$scope.newslist=[]; $scope.newslist=data.body.results;$scope.pagerz='15';if (parseInt(data.body.total_count,10) < 15){$scope.fmydisabled=true; } 
  $location.hash('topp');  $anchorScroll();} else {alert('Keine Stories gefunden.')} }); };
  
  $scope.mysavedpager = function() { $scope.fmydisabled=false; $scope.sucher=true;$scope.searchz="";$scope.wweiter=false;$scope.fweiter=true;
   $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 'mySaved', offs: $scope.pagerz}}).success(function(data, status, headers, config) 
 { if (data != 'none'){$scope.newslist=[]; $scope.newslist=data.body.results;$scope.pagerz=parseInt($scope.pagerz, 10)+15; if (parseInt($scope.pagerz, 10) >= parseInt(data.body.total_count,10)){$scope.fmydisabled=true; } 
  $location.hash('topp');  $anchorScroll();} else {alert('Keine Stories gefunden.')} }); };

$scope.loggout = function() {
  $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 'loggout',search: $scope.searchz, offs: $scope.pagerz}}).success(function(data, status, headers, config) {window.location.href='login.html'} )
 
 }
 
 $scope.checkers = function(obj) {
 var dataValue = obj.target.attributes.data.value;
 var checky = obj.target.checked;
 if (checky == true){
 //alert($cookies.get('email') +'|'+dataValue)
 $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 'like1',user: $cookies.get('email'), hash: $cookies.get('hash'), key: dataValue}}).success(function(data, status, headers, config) 
 {}
 )  }
   if (checky == false){
 //alert($cookies.get('email') +'|'+dataValue)
 $http({ url: window.location.hostname +'/app.js', method: "GET", params: {o: 'like2',user: $cookies.get('email'), hash: $cookies.get('hash'), key: dataValue}}).success(function(data, status, headers, config) 
 {}
 )  }
   }
 }]);
 



</script>
<!--
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<center><ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-1571168911646120"
     data-ad-slot="1588231650"></ins></center>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
-->
</body>
